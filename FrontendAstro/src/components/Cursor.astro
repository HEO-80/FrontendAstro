---
// llamarlo en el layout así: src/components/CustomCursor.astro
---

<div id="cursor">
    <img src="/johnvicent-favicon-blue.svg" alt="Custom Cursor" />
</div>

<style>
    #cursor {
        position: fixed;
        top: 0;
        left: 0;
        width: 30px; /* Ajusta el tamaño de tu imagen */
        height: 30px;
        z-index: 9999; /* Para que esté siempre encima de todo */
        pointer-events: none; /* ¡CRUCIAL! Esto permite hacer clic a través de la imagen */
        transform: translate(-50%, -50%); /* Centra la imagen en la punta del mouse */
        
        /* Opcional: Transición para que se sienta "flotante" y suave */
        transition: transform 0.15s cubic-bezier(0.23, 1, 0.32, 1); 
        
        /* Inicialmente oculto hasta que se mueva el mouse para evitar parpadeos */
        opacity: 0; 
    }

    /* Clase para mostrar el cursor cuando el mouse se mueve */
    #cursor.visible {
        opacity: 1;
    }

    /* Opcional: Ocultar el cursor nativo del sistema 
    :global(body) {
        cursor: none;
    } */
    
    /* Mostrar cursor nativo en enlaces para mejor UX (Opcional) */
    :global(a), :global(button) {
        cursor: pointer;
    }
</style>

<script>
    const cursor = document.getElementById('cursor')!;

    // Función para actualizar la posición
    const moveCursor = (e: MouseEvent) => {
        // Hacemos visible el cursor al primer movimiento
        if (cursor.style.opacity === '') {
            cursor.classList.add('visible');
        }

        const x = e.clientX;
        const y = e.clientY;

        // Usamos transform porque es más eficiente (mejor rendimiento) que top/left
        cursor.style.transform = `translate3d(${x}px, ${y}px, 0) translate(-50%, -50%)`;
    };

        // Escuchamos el evento en toda la ventana
        window.addEventListener('mousemove', moveCursor);

</script>