--- 
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
---

<Layout>
  <!-- Hero Section -->
  <section
    class="relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-br from-purple-900 via-pink-900 to-black"
  >
    <!-- Grid Pattern -->
    <div
      class="absolute inset-0 opacity-20"
      style="background-image: linear-gradient(rgba(236, 72, 153, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(236, 72, 153, 0.1) 1px, transparent 1px); background-size: 50px 50px;"
    >
    </div>

    <!-- Floating Elements -->
    <div class="absolute inset-0">
      <div
        class="floating-blob absolute top-20 left-10 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20"
      >
      </div>
      <div
        class="floating-blob-delayed absolute top-40 right-20 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20"
      >
      </div>
      <div
        class="floating-blob-slow absolute bottom-20 left-1/3 w-80 h-80 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20"
      >
      </div>
    </div>

    <!-- Content -->
    <div class="relative z-10 text-center px-4">
      <h1
        class="glitch-title text-6xl md:text-8xl lg:text-9xl font-black mb-6 text-white"
        data-text="ALBERTO"
      >
        ALBERTO
      </h1>

      <p
        class="text-xl md:text-2xl text-pink-400 mb-4 animate-fade-in-up opacity-0"
        style="animation-delay: 0.2s;"
      >
        Frontend Developer
      </p>

      <p
        class="text-lg text-gray-300 mb-8 max-w-2xl mx-auto animate-fade-in-up opacity-0"
        style="animation-delay: 0.4s;"
      >
        Creando experiencias digitales √∫nicas con c√≥digo y creatividad
      </p>

            <div

              class="flex flex-wrap gap-4 justify-center animate-fade-in-up opacity-0 mb-12"

              style="animation-delay: 0.6s;"

            >

              <a

                href="#proyectos"

                class="px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-bold rounded-full hover:scale-110 transition-transform shadow-lg shadow-pink-500/50"

              >

                Ver Proyectos

              </a>

              <a

                href="#skills"

                class="px-8 py-4 border-2 border-pink-500 text-pink-400 font-bold rounded-full hover:bg-pink-500/10 hover:scale-110 transition-all"

              >

                Habilidades

              </a>

            </div>

          </div>

      

          <!-- Scroll Indicator -->

          <div

            class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce-slow z-20"

          >

            <svg

              class="w-8 h-8 text-pink-400"

              fill="none"

              stroke="currentColor"

              viewBox="0 0 24 24"

            >

              <path

                stroke-linecap="round"

                stroke-linejoin="round"

                stroke-width="2"

                d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>

            </svg>

          </div>

        </section>

  <!-- Terminal Section (Interactive Element) -->
  <section class="py-20 px-4 bg-black border-t border-purple-900/30">
    <div class="max-w-4xl mx-auto">
      <div
        class="bg-gray-900 rounded-lg overflow-hidden border border-gray-800 shadow-2xl font-mono text-sm md:text-base"
      >
        <!-- Terminal Header -->
        <div class="bg-gray-800 px-4 py-2 flex items-center gap-2">
          <div class="w-3 h-3 rounded-full bg-red-500"></div>
          <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
          <div class="w-3 h-3 rounded-full bg-green-500"></div>
          <div class="ml-4 text-gray-400 text-xs">user@alberto-dev:~</div>
        </div>
        <!-- Terminal Body -->
        <div class="p-6 h-96 overflow-y-auto" id="terminal-body">
          <div class="text-green-400 mb-2">¬°Bienvenid@ a mi terminal!</div>
          <div class="text-gray-400 mb-4">¬øQue te gustaria saber?</div>
          <div class="flex flex-col gap-2" id="terminal-history"></div>
          <div class="flex items-center gap-2 mt-2">
            <span class="text-pink-500">‚ûú</span>
            <span class="text-cyan-400">~</span>
            <input
              type="text"
              id="terminal-input"
              class="bg-transparent border-none outline-none text-white flex-1 focus:ring-0"
              autocomplete="off"
              spellcheck="false"
              autofocus
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <section
    id="skills"
    class="relative py-20 px-4 bg-gradient-to-b from-black to-purple-950"
  >
    <div class="max-w-6xl mx-auto">
      <h2 class="text-4xl md:text-6xl font-black text-center mb-16">
        <span
          class="bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent"
        >
          HABILIDADES
        </span>
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Skill Card 1 -->
        <div
          class="skill-card group relative bg-gradient-to-br from-pink-900/20 to-purple-900/20 backdrop-blur-sm border border-pink-500/30 rounded-2xl p-6 hover:border-pink-500 transition-all hover:-translate-y-2"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-pink-600/0 to-purple-600/0 group-hover:from-pink-600/10 group-hover:to-purple-600/10 rounded-2xl transition-all"
          >
          </div>
          <div class="relative">
            <div
              class="w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <span class="text-3xl">üé®</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">HTML5 & CSS3</h3>
            <p class="text-gray-400">
              Desarrollo sem√°ntico y responsive design con las √∫ltimas
              tecnolog√≠as
            </p>
          </div>
        </div>

        <!-- Skill Card 2 -->
        <div
          class="skill-card group relative bg-gradient-to-br from-pink-900/20 to-purple-900/20 backdrop-blur-sm border border-pink-500/30 rounded-2xl p-6 hover:border-pink-500 transition-all hover:-translate-y-2"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-pink-600/0 to-purple-600/0 group-hover:from-pink-600/10 group-hover:to-purple-600/10 rounded-2xl transition-all"
          >
          </div>
          <div class="relative">
            <div
              class="w-16 h-16 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <span class="text-3xl">‚ö°</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">TypeScript</h3>
            <p class="text-gray-400">
              Desarrollo interactivo y din√°mico con TypeScript y React
            </p>
          </div>
        </div>

        <!-- Skill Card 3 -->
        <div
          class="skill-card group relative bg-gradient-to-br from-pink-900/20 to-purple-900/20 backdrop-blur-sm border border-pink-500/30 rounded-2xl p-6 hover:border-pink-500 transition-all hover:-translate-y-2"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-pink-600/0 to-purple-600/0 group-hover:from-pink-600/10 group-hover:to-purple-600/10 rounded-2xl transition-all"
          >
          </div>
          <div class="relative">
            <div
              class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <span class="text-3xl">üí®</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">Tailwind CSS</h3>
            <p class="text-gray-400">Dise√±o r√°pido y eficiente</p>
          </div>
        </div>

        <!-- Skill Card 4 -->
        <div
          class="skill-card group relative bg-gradient-to-br from-pink-900/20 to-purple-900/20 backdrop-blur-sm border border-pink-500/30 rounded-2xl p-6 hover:border-pink-500 transition-all hover:-translate-y-2"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-pink-600/0 to-purple-600/0 group-hover:from-pink-600/10 group-hover:to-purple-600/10 rounded-2xl transition-all"
          >
          </div>
          <div class="relative">
            <div
              class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <span class="text-3xl">üöÄ</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">Git & GitHub</h3>
            <p class="text-gray-400">
              Control de versiones y colaboraci√≥n en proyectos
            </p>
          </div>
        </div>

        <!-- Skill Card 5 -->
        <div
          class="skill-card group relative bg-gradient-to-br from-pink-900/20 to-purple-900/20 backdrop-blur-sm border border-pink-500/30 rounded-2xl p-6 hover:border-pink-500 transition-all hover:-translate-y-2"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-pink-600/0 to-purple-600/0 group-hover:from-pink-600/10 group-hover:to-purple-600/10 rounded-2xl transition-all"
          >
          </div>
          <div class="relative">
            <div
              class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <span class="text-3xl">‚ú®</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">Animaciones</h3>
            <p class="text-gray-400">
              CSS animations, Tailwind keyframes y pr√≥ximamente GSAP
            </p>
          </div>
        </div>

        <!-- Skill Card 6 -->
        <div
          class="skill-card group relative bg-gradient-to-br from-pink-900/20 to-purple-900/20 backdrop-blur-sm border border-pink-500/30 rounded-2xl p-6 hover:border-pink-500 transition-all hover:-translate-y-2"
        >
          <div
            class="absolute inset-0 bg-gradient-to-br from-pink-600/0 to-purple-600/0 group-hover:from-pink-600/10 group-hover:to-purple-600/10 rounded-2xl transition-all"
          >
          </div>
          <div class="relative">
            <div
              class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <span class="text-3xl">‚öõÔ∏è</span>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">React</h3>
            <p class="text-gray-400">
              Componentes modernos y aplicaciones interactivas
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects Section -->
  <section id="proyectos" class="relative py-20 px-4 bg-black">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-4xl md:text-6xl font-black text-center mb-16">
        <span
          class="bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent"
        >
          PROYECTOS
        </span>
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <Card
          title="Astro Tickets"
          description="Aplicaci√≥n de tickets y eventos creada con Astro, mostrando manejo de estado, rutas din√°micas y componentes interactivos. Proyecto principal del curso."
          githubUrl="https://github.com/albertoguinda/astro-tickets"
          deployUrl="https://astro-tickets.vercel.app/"
          tags={["Astro", "Tailwind", "TypeScript", "React", "GSAP"]}
        />
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section
    class="relative py-32 px-4 overflow-hidden bg-gradient-to-br from-pink-900 via-purple-900 to-black"
  >
    <div
      class="absolute inset-0 opacity-10"
      style="background-image: linear-gradient(rgba(236, 72, 153, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(236, 72, 153, 0.1) 1px, transparent 1px); background-size: 50px 50px;"
    >
    </div>

    <div class="relative max-w-4xl mx-auto text-center">
      <h2 class="text-4xl md:text-6xl font-black text-white mb-6">
        ¬øListo para crear algo
        <span
          class="block bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent"
        >
          INCRE√çBLE?
        </span>
      </h2>

      <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
        Siempre estoy buscando nuevos desaf√≠os y proyectos interesantes
      </p>

      <div class="flex flex-wrap gap-4 justify-center">
        <a
          href="mailto:albertoguindasevilla@gmail.com"
          class="px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-bold rounded-full hover:scale-110 transition-transform shadow-lg shadow-pink-500/50"
        >
          Contactar
        </a>
        <a
          href="https://github.com/albertoguinda"
          target="_blank"
          class="px-8 py-4 border-2 border-pink-500 text-pink-400 font-bold rounded-full hover:bg-pink-500/10 hover:scale-110 transition-all"
        >
          GitHub
        </a>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Animaciones */
  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  .floating-blob {
    animation: float 6s ease-in-out infinite;
  }

  .floating-blob-delayed {
    animation: float 8s ease-in-out infinite;
    animation-delay: 2s;
  }

  .floating-blob-slow {
    animation: float 10s ease-in-out infinite;
    animation-delay: 4s;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fadeInUp 1s ease-out forwards;
  }

  @keyframes bounceSlow {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-bounce-slow {
    animation: bounceSlow 2s ease-in-out infinite;
  }

  /* Glitch Effect */
  .glitch-title {
    position: relative;
    animation: glitch-skew 1s infinite;
  }

  .glitch-title::before, .glitch-title::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .glitch-title::before {
    left: 2px;
    text-shadow: -2px 0 #ec4899;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim 5s infinite linear alternate-reverse;
  }

  .glitch-title::after {
    left: -2px;
    text-shadow: -2px 0 #8b5cf6;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim2 5s infinite linear alternate-reverse;
  }

  @keyframes glitch-anim {
    0% {
      clip: rect(31px, 9999px, 94px, 0);
    }
    20% {
      clip: rect(60px, 9999px, 89px, 0);
    }
    40% {
      clip: rect(80px, 9999px, 77px, 0);
    }
    60% {
      clip: rect(49px, 9999px, 36px, 0);
    }
    80% {
      clip: rect(53px, 9999px, 54px, 0);
    }
    100% {
      clip: rect(74px, 9999px, 49px, 0);
    }
  }

  @keyframes glitch-anim2 {
    0% {
      clip: rect(65px, 9999px, 100px, 0);
    }
    20% {
      clip: rect(30px, 9999px, 64px, 0);
    }
    40% {
      clip: rect(72px, 9999px, 62px, 0);
    }
    60% {
      clip: rect(99px, 9999px, 21px, 0);
    }
    80% {
      clip: rect(15px, 9999px, 78px, 0);
    }
    100% {
      clip: rect(48px, 9999px, 31px, 0);
    }
  }

  @keyframes glitch-skew {
    0% {
      transform: skew(0deg);
    }
    10% {
      transform: skew(-2deg);
    }
    20% {
      transform: skew(0deg);
    }
    30% {
      transform: skew(1deg);
    }
    40% {
      transform: skew(0deg);
    }
    100% {
      transform: skew(0deg);
    }
  }

  @media (max-width: 768px) {
    .glitch-title {
      font-size: 3rem;
    }
  }
</style>

<script>
  const terminalInput = document.getElementById(
    "terminal-input"
  ) as HTMLInputElement;
  const terminalHistory = document.getElementById("terminal-history");
  const terminalBody = document.getElementById("terminal-body");
  
  let isChatMode = false;

  const fileSystem = {
    "about.txt": "I'm Alberto, a passionate Frontend Developer turning coffee into clean code.",
    "skills.md": "Frontend: HTML5, CSS3, JavaScript, TypeScript, React, Astro, Tailwind CSS",
    "contact.json": '{\n  "email": "alberto@ejemplo.com",\n  "github": "github.com/albertoguinda"\n}',
    "projects/": "ticket-app/  tic-tac-toe/"
  };

  const commands: Record<string, string | ((args: string[]) => string)> = {
    help: "Available commands: <br/> - <span class='text-yellow-400'>ls</span>: List files<br/> - <span class='text-yellow-400'>cat [file]</span>: Read file content<br/> - <span class='text-yellow-400'>chat</span>: Talk to AI (Beta)<br/> - <span class='text-yellow-400'>whoami</span>: Display current user<br/> - <span class='text-yellow-400'>date</span>: Show current date/time<br/> - <span class='text-yellow-400'>open [link]</span>: Open project link<br/> - <span class='text-yellow-400'>clear</span>: Clear terminal",
    ls: () => Object.keys(fileSystem).map(f => f.endsWith('/') ? `<span class='text-blue-400'>${f}</span>` : `<span class='text-gray-300'>${f}</span>`).join('  '),
    whoami: "user@alberto-dev",
    date: () => new Date().toLocaleString(),
    sudo: "Permission denied: you are not Alberto",
    open: (args) => {
      if (args[0] === "github") {
        window.open("https://github.com/albertoguinda", "_blank");
        return "Opening GitHub...";
      }
      return "Usage: open github";
    },
    cat: (args) => {
      if (!args[0]) return "Usage: cat [filename]";
      const file = args[0];
      if (file in fileSystem) {
         // @ts-ignore
        return fileSystem[file].replace(/\n/g, "<br/>");
      }
      return `cat: ${file}: No such file or directory`;
    }
  };

  async function handleChat(input: string) {
    const loadingId = "loading-" + Date.now();
    const loadingLine = document.createElement("div");
    loadingLine.id = loadingId;
    loadingLine.className = "text-gray-500 mb-2 ml-4 italic animate-pulse";
    loadingLine.textContent = "AI is thinking...";
    terminalHistory?.appendChild(loadingLine);
    
    if (terminalBody) terminalBody.scrollTop = terminalBody.scrollHeight;

    try {
      // Using a free text generation API (Pollinations.ai)
      // Note: This is a public API and may have rate limits or stability issues.
      // We prepend a system prompt to keep it in character.
      const systemPrompt = "You are a helpful AI assistant inside Alberto's portfolio terminal. Keep answers concise and tech-focused.";
      const response = await fetch(`https://text.pollinations.ai/${encodeURIComponent(systemPrompt + " User says: " + input)}`);
      
      if (!response.ok) throw new Error("API Error");
      
      const text = await response.text();
      
      const loadingElement = document.getElementById(loadingId);
      if (loadingElement) loadingElement.remove();

      const responseLine = document.createElement("div");
      responseLine.className = "text-green-300 mb-2 ml-4 whitespace-pre-wrap";
      responseLine.textContent = text;
      terminalHistory?.appendChild(responseLine);

    } catch (error) {
      const loadingElement = document.getElementById(loadingId);
      if (loadingElement) loadingElement.remove();

      const errorLine = document.createElement("div");
      errorLine.className = "text-red-400 mb-2 ml-4";
      errorLine.textContent = "Error connecting to AI service. Please try again later.";
      terminalHistory?.appendChild(errorLine);
    }

    if (terminalBody) terminalBody.scrollTop = terminalBody.scrollHeight;
  }

  terminalInput?.addEventListener("keydown", async (e) => {
    if (e.key === "Enter") {
      const fullInput = terminalInput.value.trim();
      if (!fullInput) return;

      // Add command to history
      const commandLine = document.createElement("div");
      if (isChatMode) {
         commandLine.innerHTML = `<span class="text-purple-500">AI-Chat</span> <span class="text-cyan-400">¬ª</span> <span class="text-white">${fullInput}</span>`;
      } else {
         commandLine.innerHTML = `<span class="text-pink-500">‚ûú</span> <span class="text-cyan-400">~</span> <span class="text-white">${fullInput}</span>`;
      }
      terminalHistory?.appendChild(commandLine);
      terminalInput.value = "";
      
      if (terminalBody) terminalBody.scrollTop = terminalBody.scrollHeight;

      // Handle Input
      const lowerInput = fullInput.toLowerCase();

      if (isChatMode) {
        if (lowerInput === "exit") {
          isChatMode = false;
          const msg = document.createElement("div");
          msg.className = "text-yellow-400 mb-2 ml-4";
          msg.textContent = "Exited AI Chat Mode.";
          terminalHistory?.appendChild(msg);
        } else {
          await handleChat(fullInput);
        }
      } else {
        const [cmd, ...args] = lowerInput.split(' ');

        if (cmd === "chat") {
          isChatMode = true;
          const msg = document.createElement("div");
          msg.className = "text-yellow-400 mb-2 ml-4";
          msg.innerHTML = "Entering AI Chat Mode... <br/>Type 'exit' to return to terminal commands.";
          terminalHistory?.appendChild(msg);
        } else if (cmd === "clear") {
          if (terminalHistory) terminalHistory.innerHTML = "";
        } else if (cmd in commands) {
          const response = document.createElement("div");
          response.className = "text-gray-300 mb-2 ml-4 font-mono";
          
          const commandValue = commands[cmd];
          if (typeof commandValue === 'function') {
             response.innerHTML = commandValue(args);
          } else {
             response.innerHTML = commandValue;
          }
          
          terminalHistory?.appendChild(response);
        } else {
          const error = document.createElement("div");
          error.className = "text-red-400 mb-2 ml-4";
          error.textContent = `Command not found: ${cmd}. Type 'help' for available commands.`;
          terminalHistory?.appendChild(error);
        }
      }
      
      // Scroll to bottom again after synchronous updates
      if (terminalBody) {
        terminalBody.scrollTop = terminalBody.scrollHeight;
      }
    }
  });

  // Focus input when clicking anywhere in terminal
  terminalBody?.addEventListener("click", () => {
    terminalInput?.focus();
  });
</script>